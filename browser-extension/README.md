# ChatGPT to Kelivo 浏览器扩展

一键将 ChatGPT 对话导出到 Kelivo 助手的浏览器扩展。

## ✨ 功能特性

- 🚀 **一键导出**：在 ChatGPT 页面点击按钮即可导出当前对话
- 🤖 **自动导入**：自动导入到指定的 Kelivo 助手
- 📜 **完整导出**：自动滚动页面确保长对话完整导出，不遗漏任何消息
- 💫 **实时反馈**：导入成功/失败即时通知

## 📦 安装

### 1. 安装浏览器扩展

#### Chrome / Edge

1. 打开扩展管理页面：
   - Chrome: `chrome://extensions/`
   - Edge: `edge://extensions/`

2. 启用**开发者模式**（右上角开关）

3. 点击**加载已解压的扩展程序**

4. 选择 `browser-extension` 文件夹

5. 扩展安装成功！

### 2. 启动导入服务器

在 Kelivo 项目目录下运行：

```bash
dart run tools/import_server.dart
```

你会看到：

```
🚀 Kelivo 导入服务器已启动
   监听地址: http://localhost:8765
   按 Ctrl+C 停止服务器
```

**重要**：使用扩展时必须保持此服务器运行！

### 3. 配置扩展

1. 点击浏览器工具栏中的扩展图标

2. 设置：
   - **默认助手名称**：例如 `意图`、`111默认助手`
   - **导入服务器地址**：默认 `http://localhost:8765`

3. 点击**保存设置**

## 🎯 使用方法

1. **启动导入服务器**
   ```bash
   dart run tools/import_server.dart
   ```

2. **打开 ChatGPT**
   - 访问 https://chatgpt.com
   - 进行对话或打开已有对话

3. **点击导出按钮**
   - 页面右侧中间会出现紫色的 **"导出到 Kelivo"** 按钮
   - 点击按钮

4. **等待导入完成**
   - 扩展会自动提取对话内容
   - 发送到本地服务器
   - 导入到 Kelivo 数据库

5. **查看导入结果**
   - 成功：右上角显示绿色通知 ✅
   - 失败：右上角显示红色通知 ❌

6. **在 Kelivo 中查看**
   - 打开 Kelivo 应用
   - 切换到对应的助手
   - 查看新导入的对话

## 🔧 配置选项

### 默认助手名称

指定导入到哪个助手：
- 助手名称：`意图`、`111默认助手`
- 助手 ID：`6c6fcd5f-1c98-46f5-ab2f-43487017b34c`

### 服务器地址

默认：`http://localhost:8765`

使用不同端口：
```bash
dart run tools/import_server.dart 9999
```

然后在扩展设置中修改为：`http://localhost:9999`

## 🐛 常见问题

### 无法连接到服务器

**原因**：导入服务器未启动

**解决**：
```bash
dart run tools/import_server.dart
```

### 数据库被锁定

**原因**：Kelivo 应用正在运行

**解决**：关闭 Kelivo 应用后重试

### 看不到导入的对话

**原因**：当前选中的助手不是导入目标助手

**解决**：在 Kelivo 中切换到对应的助手

### 按钮没有出现

**原因**：页面未完全加载或扩展未启用

**解决**：
- 刷新 ChatGPT 页面
- 检查扩展是否已启用
- 检查扩展权限

### 长对话导出不完整

**解决**：
- ✅ **已自动修复**：扩展会自动滚动页面加载所有消息
- 导出时会显示进度
- 等待进度完成即可

## 📄 许可证

MIT License

